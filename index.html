<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />
  <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&display=swap" rel="stylesheet" />
  <title>Markus sin Julekalender</title>
  <style>
    :root {
      --bg:#0c111b; --card:#101827; --accent:#e74c3c; --text:#eef2f7; --muted:#94a3b8;
      --focus:#22c55e; --brand:#3454d1; --title-font:'Mountains of Christmas', cursive;
      --tile-red-1:#b91c1b;
      --tile-red-2:#b91c1b;
      --tile-red-1-hover:#da1717;
      --tile-red-2-hover:#da1717;
      --tile-red-dim-1:#4f1c1b;
      --tile-red-dim-2:#34100f;
      --tile-border:#6b1f1c;
    }
    *{box-sizing:border-box}
    body{margin:0;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--text);background:radial-gradient(1200px 600px at 50% -200px,#1b2437,var(--bg));min-height:100dvh}
    header{text-align:center;padding:1.25rem 0 .5rem}
    header h1{font-family:var(--title-font);font-size:2.2rem;margin:0}
    header p{color:var(--muted)}
    @media (min-width:768px){header h1{font-size:2.8rem}}

    .container{width:min(1100px,92%);margin:0 auto}
    main.container{padding:24px clamp(16px,4vw,28px) 80px}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:32px;padding:20px 0}
    @media (max-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:700px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:380px){.grid{grid-template-columns:1fr}}

    .card{
      position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;
      aspect-ratio:1/1;border-radius:22px;border:1.5px solid var(--tile-border);
      background:linear-gradient(145deg,var(--tile-red-1),var(--tile-red-2));
      box-shadow:0 10px 24px rgba(0,0,0,.30), inset 0 1px 0 rgba(255,255,255,.06), inset 0 -1px 0 rgba(0,0,0,.25);
      transition:transform .18s ease, box-shadow .18s ease, background .18s ease;
      cursor:pointer;
    }
    .card.locked{
      background:linear-gradient(145deg,var(--tile-red-dim-1),var(--tile-red-dim-2));
      filter:saturate(.95);
    }

    @media (hover:hover){
      .card:not(.locked):hover{
        transform:scale(1.02);
        box-shadow:0 14px 36px rgba(0,0,0,.35);
        background:linear-gradient(145deg,var(--tile-red-1-hover),var(--tile-red-2-hover));
      }
    }

    .card .num{
      font-family:var(--title-font);
      font-size:2.6rem;line-height:1;color:#fff;
      margin:6px 0 0 0;text-shadow:0 1px 0 rgba(0,0,0,.35);
    }
    .card.locked .num{opacity:.6;filter:brightness(.85)}

    .status{display:flex;align-items:center;justify-content:center;margin-bottom:8px}
    .status svg{
      width:28px;height:28px;stroke:rgba(255,255,255,.95);fill:none;stroke-width:2.2;stroke-linecap:round;stroke-linejoin:round;
    }
    .card.locked .status svg{stroke:rgba(255,255,255,.7)}

    /* Modal (Ã¥pne luker) */
    .modal{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.5);padding:16px;z-index:50}
    .modal.hidden{display:none}
    .modal-content{background:var(--card);border:1px solid #263453;border-radius:18px;width:min(760px,96%);padding:18px;position:relative;color:var(--text)}
    .modal-content img{width:100%;border-radius:12px;margin:10px 0;background:#0b1220;display:block}
    .close{position:absolute;right:18px;top:10px;background:transparent;color:#fff;border:none;font-size:1.8rem;cursor:pointer;line-height:1}
    .close:focus-visible{outline:3px solid var(--focus);border-radius:8px}
    .btns{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:#1db954;color:#fff;text-decoration:none;font-weight:700}
    #btn-apple{background:#333}

    .snow::before,.snow::after{content:"";position:fixed;left:0;top:-50px;width:100%;height:100%;pointer-events:none;background-image:radial-gradient(2px 2px at 20px 30px,#fff 50%,transparent 51%),radial-gradient(3px 3px at 100px 80px,#fff 50%,transparent 51%),radial-gradient(2px 2px at 200px 50px,#fff 50%,transparent 51%),radial-gradient(3px 3px at 300px 10px,#fff 50%,transparent 51%),radial-gradient(2px 2px at 400px 40px,#fff 50%,transparent 51%);background-size:400px 200px;animation:snow 10s linear infinite;opacity:.75}
    .snow::after{animation-duration:16s;opacity:.5;filter:blur(1px)}
    @keyframes snow{to{transform:translateY(200px)}}
  </style>
</head>
<body>
  <div class="snow"></div>
  <header>
    <h1>ðŸŽ„ Markus sin Julekalender</h1>
    <p>Et lite stykke musikk hver dag fram til jul. En del gleder og kanskje noen utfordringer?</p>
  </header>
  <main class="container">
    <div id="grid" class="grid"></div>
  </main>

  <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content">
      <button class="close" id="closeBtn" aria-label="Lukk">Ã—</button>
      <h2 id="modal-title"></h2>
      <img id="modal-image" alt="" loading="lazy" />
      <p id="modal-text"></p>
      <div class="btns">
        <a id="btn-apple" class="btn" target="_blank" rel="noopener">ï£¿ Music</a>
        <a id="btn-spotify" class="btn" target="_blank" rel="noopener">Spotify</a>
      </div>
    </div>
  </div>

  <script>
    const FIXED_TEST_DAY = 8;

    async function loadDays() {
      const placeholder = 'data:image/svg+xml;utf8,' + encodeURIComponent(`
        <svg xmlns="http://www.w3.org/2000/svg" width="800" height="450">
          <rect width="100%" height="100%" fill="#141e30"/>
          <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#e5e7eb" font-size="42">Julebilde</text>
        </svg>`);
      return Array.from({length:24}, (_,i)=>({title:`${i+1}. desember`,image:placeholder,text:`Tekst for luke ${i+1}.`,apple:'',spotify:''}));
    }

    const grid=document.getElementById('grid');
    const modal=document.getElementById('modal');
    const closeBtn=document.getElementById('closeBtn');

    function render(days){
      grid.innerHTML='';
      days.forEach((d,i)=>{
        const day=i+1;
        const card=document.createElement('button');
        card.className='card';
        const displayNum = day.toString();
        const icon = day<=FIXED_TEST_DAY
          ? `<span class=\"status\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\"><path d=\"M12 2c-.8 0-1.4.6-1.4 1.4v1.6c-2.5.6-4.6 2.8-4.6 5.5 0 3.4-1.4 5-2 5.4h16c-.6-.4-2-2-2-5.4 0-2.7-2.1-4.9-4.6-5.5V3.4c0-.8-.6-1.4-1.4-1.4zM12 22a2 2 0 0 0 2-2h-4a2 2 0 0 0 2 2z\"/></svg></span>`
          : `<span class=\"status\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\"><rect x=\"5\" y=\"10\" width=\"14\" height=\"10\" rx=\"2\"/><path d=\"M8 10V8a4 4 0 0 1 8 0v2\"/></svg></span>`;
        card.innerHTML = `${icon}<span class=\"num\">${displayNum}</span>`;
        if(day>FIXED_TEST_DAY){card.classList.add('locked');card.disabled=true;}else{card.addEventListener('click',()=>openModal(day,d));}
        grid.appendChild(card);
      });
    }

    function openModal(day,item){
      document.getElementById('modal-title').textContent=`Luke ${day}`;
      const img=document.getElementById('modal-image');
      img.src=item.image;
      document.getElementById('modal-text').textContent=item.text;
      modal.classList.remove('hidden');
    }
    closeBtn.addEventListener('click',()=>modal.classList.add('hidden'));

    (async()=>{const d=await loadDays();render(d);})();
  </script>
</body>
</html>
